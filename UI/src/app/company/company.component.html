<div class="container">
  <h1>Product Management</h1>

  <!-- Button to open the add product form -->
  <button class="add-product-btn" (click)="openAddProductForm()">Add Product</button>

  <!-- Display the list of products as cards -->
  <div class="product-cards">
    <div class="product-card" *ngFor="let product of products">
      <h3>{{ product.productName }}</h3>
      <p>Price: {{ product.sellingPrice }} &euro;</p>
      <ng-container *ngIf="!product.isEditing">
        <label>
          Quantity:
          <input type="number" [(ngModel)]="product.productQuantity" name="productQuantity" (input)="calculateProfit(product)" />
        </label>
        <label>
          Remainings:
          <input type="number" [(ngModel)]="product.productRemainings" name="productRemainings" (input)="calculateProfit(product)" />
        </label>
        <p>Profit: {{ calculateProfit(product) }}</p>
        <button (click)="toggleEditProduct(product)">Edit</button>
      </ng-container>
      <ng-container *ngIf="product.isEditing">
        <form (ngSubmit)="updateProduct(product.productId, product)">
          <label>
            Name:
            <input type="text" [(ngModel)]="product.productName" name="productName" required />
          </label>
          <label>
            Price:
            <input type="number" [(ngModel)]="product.sellingPrice" name="sellingPrice" required />
          </label>
          <button type="submit">Save</button>
          <button type="button" (click)="toggleEditProduct(product)">Cancel</button>
        </form>
      </ng-container>
      <button (click)="deleteProduct(product.productId)">Delete</button>
    </div>
  </div>

  <p>Total Profit: {{ calculateTotalProfit() }}</p>

  <button (click)="generateSalesTable()">Generate Sales Table</button>

  <table>
    <thead>
      <tr>
        <th>Date</th>
        <th>Product Index</th>
        <th>Product Name</th>
        <th>Product Quantity</th>
        <th>Product Remainings</th>
        <th>Price</th>
        <th>Profit</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let salesRecord of salesRecords">
        <td>{{ salesRecord.date | date }}</td>
        <td>{{ salesRecord.productIndex }}</td>
        <td>{{ salesRecord.productName }}</td>
        <td>{{ salesRecord.productQuantity }}</td>
        <td>{{ salesRecord.productRemainings }}</td>
        <td>{{ salesRecord.price }}</td>
        <td>{{ salesRecord.profit }}</td>
      </tr>
    </tbody>
  </table>

  <button (click)="saveSalesRecords()">Save Sales Records</button>


  <!-- Existing template code... -->

<!-- Existing template code... -->


<h1>Sales Records</h1>

<!-- Form to filter sales records by date -->
<div class="filter-form">
  <label>
    Filter by Date:
    <input type="date" [(ngModel)]="filterDate" (ngModelChange)="filterSalesRecordsByDate()" />
  </label>
</div>

<!-- Display the filtered sales records -->
<table>
  <thead>
    <tr>
      <th>Date</th>
      <th>Product Index</th>
      <th>Product Name</th>
      <th>Product Quantity</th>
      <th>Product Remainings</th>
      <th>Price</th>
      <th>Profit</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let salesRecord of filteredSalesRecords">
      <td>{{ salesRecord.date | date }}</td>
      <td>{{ salesRecord.productIndex }}</td>
      <td>{{ salesRecord.productName }}</td>
      <td>{{ salesRecord.productQuantity }}</td>
      <td>{{ salesRecord.productRemainings }}</td>
      <td>{{ salesRecord.price }}</td>
      <td>{{ salesRecord.profit }}</td>
    </tr>
  </tbody>
</table>

<!-- End of template code... -->


</div>
